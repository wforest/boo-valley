/* FILE: main/plugins/__beaver-builder.scss */

//
// Beaver Builder
//





// Prepare the page layout for Beaver Builder - make it fullwidth if possible

	.fl-builder.is-singular {
		@extend %fullwidth_sections_layout;

		&.single {

			.site-main > .entry > .entry-header {
				@extend %screen_reader_hiding;
			}

		}

	}



// Row

	.fl-row {

		&-content {
			@extend %max_width_1920;



			// Fixing full-height row responsive layout compatibility with theme styles

				.site .fl-row-full-height & {
					flex: 0 1 auto;
				}



			// Split-screen layout

				.fl-row-full-height.split-screen-row & {
					display: flex;
					flex-wrap: wrap;
				}

				&-wrap {

					body:not(.page-template-blank):not(.has-sticky-header) .fl-row-full-height & {
						min-height: calc( 100vh - #{ map_get( $header_height, 'normal' ) +rem } );
					}

				}

		}



		// Row width

			&-fixed-width {

				.site & {
					@extend %content_width;

					& .fl-row-fixed-width {
						width: 100%;
						max-width: 100%;
					}

				}

			}

	}



// Column

	.fl-col {
		max-width: 100%;

		&-group {
			display: flex;
			flex-wrap: wrap;
			width: 100%; // This is overrode in BB layout CSS when needed
		}

		&-content {
			// For IE
			width: 100%;
			min-width: 1px;
			max-width: 100%;



			// Box shadow on columns

				@each $box_shadow_name, $box_shadow_size in $column_box_shadows {

					.box-shadow-#{$box_shadow_name} > & {
						box-shadow: 0 ( $box_shadow_size / 3 ) $box_shadow_size rgba( #000, $column_box_shadows_opacity );
					}

				}

		}



		// Fixing responsive column width

			&-small {

				.site & {
					max-width: 100%;
				}

			}



		// Equalize column height	for all columns by default

			&,
			&-content {
				display: flex;
				flex: 1 1 auto;
			}

			&-content {
				flex-direction: column;
				flex-shrink: 1;
			}



		// Vertical column alignment

			.fl-col-group &.vertical-align-top,
			.fl-col-group &.vertical-align-top .fl-col-content,
			.vertical-align-top &,
			.vertical-align-top &-content {
				justify-content: flex-start;
			}

			.fl-col-group &.vertical-align-middle,
			.fl-col-group &.vertical-align-middle .fl-col-content,
			.vertical-align-middle &,
			.vertical-align-middle &-content {
				justify-content: center;
			}

			.fl-col-group &.vertical-align-bottom,
			.fl-col-group &.vertical-align-bottom .fl-col-content,
			.vertical-align-bottom &,
			.vertical-align-bottom &-content {
				justify-content: flex-end;
			}



		// Hover column color change

			&[class*="hover-color-"] {

				&:hover {

					* {
						color: inherit;
					}

				}

				.fl-col-content {
					transition: background ( $small_animation_speed +s ),
					            color ( $small_animation_speed +s ),
					            transform ( $small_animation_speed +s );
				}

				.fl-builder-content &:hover .fl-col-content {
					border-width: 0;
				}

			}

	}



// Module

	// Beaver Builder native modules

		// Contact form

			.fl-input-group {
				margin-bottom: 1em;
			}

			.fl-contact-form {

				label {
					display: block;
				}

				input[type="submit"],
				input[type="text"],
				input[type="email"],
				textarea {
					width: 100%;
				}

			}



		// Images / Photos

			.fl-photo-content {
				width: 100%;

				.fullwidth & {

					img {
						width: 100% !important;
					}

				}

			}



		// Text module

			// Support for CSS columns

				%column_gap {
					column-gap: $golden +em;
					column-width: 12em;

					h2,
					h3 {
						column-span: all;
					}

				}

				.fl-rich-text {

					// When text module has a `.columns-#` special class,
					// a CSS3 columns layout will apply on the text.
					//
					// @link  http://caniuse.com/#search=column

					@for $i from 2 through 5 {

						.columns-#{$i} & {
							@extend %column_gap;
							column-count: $i;

							p {
								margin: 0;
							}

							h4,
							h5,
							h6 {
								margin: 1em 0 ( $golden_major +em );
								line-height: inherit;
								font-size: 1em;
								font-weight: 700;
							}

						}

					}

				}



// "Templates" custom post type

	.single-fl-builder-template {
		@extend %fullwidth_sections_layout;

		.intro {
			padding: 2% 0;

			&-title {
				font-size: $golden +em;
			}

		}

	}



// Fixing layout issues (on Safari browsers)

	.fl-row,
	.fl-row-content,
	.fl-col-group,
	.fl-col,
	.fl-module,
	.fl-module-content {

		.site & {

			&::before,
			&::after {
				display: none;
			}

		}

	}



// Others

	.hide-accessibly {

		html:not(.fl-builder-edit) & {
			@extend %screen_reader_hiding;
		}

	}



// Vertical align classes reset

	.vertical-align-top,
	.vertical-align-middle,
	.vertical-align-bottom {

		&.fl-row,
		&.fl-col {
			vertical-align: inherit;
		}

	}
